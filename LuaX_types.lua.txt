---@class LuaX.Exported
---@field Renderer LuaX.Renderer
---@field Children LuaX.Children
---@field NativeElement LuaX.NativeElement
---@field create_element fun(type: LuaX.Component, props: LuaX.Props): LuaX.ElementNode
---@field clone_element (fun(element: LuaX.ElementNode, props: LuaX.Props): LuaX.ElementNode) | (fun(element: LuaX.ElementNode[], props: LuaX.Props): LuaX.ElementNode[])
---@field Fragment LuaX.Component
---@field Portal LuaX.Portal
---@field use_context LuaX.Hooks.UseContext
---@field use_effect LuaX.Hooks.UseEffect
---@field use_memo LuaX.Hooks.UseMemo
---@field use_portal LuaX.Hooks.UsePortal
---@field use_ref LuaX.Hooks.UseRef
---@field use_state LuaX.Hooks.UseState
---@field register fun() Register the LuaX loader
---@field Parser LuaX.Parser.V3
---@field transpile { from_path: (fun(path: string): string), from_string: (fun(content: string, source?: string): string)}
---@operator call:function 
---@class LuaX : LuaX.Exported
---@field _hookstate LuaX.HookState
---@class LuaX.Portal : Log.BaseFunctions
---@field Inlet LuaX.Component<LuaX.PropsWithChildren>
---@field Outlet LuaX.Component
---@field Context LuaX.Context<LuaX.Portal>
---@field name string | "LuaX.Portal"
---@field protected children { uid: number, child: LuaX.ElementNode[] }[]
---@field protected GenericProvider LuaX.Component<LuaX.PropsWithChildren>
---@field protected GenericInlet LuaX.Component<LuaX.PropsWithChildren>
---@field protected GenericOutlet LuaX.Component
---@alias LuaX.Portal.UID number
---@alias LuaX.Hooks.UseEffect.State { deps: any[]?, on_remove: function? }
---@alias LuaX.Hooks.UseEffect fun(callback: (fun(): function?), deps: any[]?)
---@alias LuaX.Hooks.UseState.Dispatch<R> fun(new_value: R | (fun(old: R): R))
---@generic T
---@alias LuaX.Hooks.UseState fun(default?: T): T, LuaX.Hooks.UseState.Dispatch<T>
---@alias LuaX.Hooks.UsePortal fun (name?: string): LuaX.Portal
---@generic T
---@alias LuaX.Hooks.UseContext fun(context: LuaX.Context<T>): T
---@alias LuaX.Hooks.UseMemo.State { deps: any[], cached: any }
---@generic T
---@alias LuaX.Hooks.UseMemo fun (callback: (fun(): T), deps: any[]): T
---@generic T
---@alias LuaX.Hooks.UseRef fun(default: T?): { current: T }
---@alias LuaX.Generic.FunctionComponent<Props> fun(props: Props): (LuaX.ElementNode | LuaX.ElementNode[] | nil)
---@alias LuaX.FunctionComponent LuaX.Generic.FunctionComponent<LuaX.Props>
---@alias LuaX.Generic.Component<Props> string | LuaX.Generic.FunctionComponent<Props>
---@alias LuaX.Component LuaX.Generic.Component<LuaX.Props>
---@alias LuaX.Props { [string]: any }
---@alias LuaX.Props.WithInternal<Props> { __luax_internal: { renderer: LuaX.Renderer, container: LuaX.NativeElement } } | Props
---@alias LuaX.PropsWithChildren<Props> { children: LuaX.ElementNode[] } | Props
---@alias LuaX.Key number[]
---@class LuaX.Context<T> : Log.BaseFunctions, { default: T, Provider: LuaX.Component }
---@field protected default table
---@field Provider LuaX.Component
---@operator call:LuaX.Context
---@alias LuaX.HookState.Listener fun(index: number, value: any)
---@class LuaX.HookState : Log.BaseFunctions
---@field index number
---@field values any[]
---@field listeners LuaX.HookState.Listener
---@operator call:LuaX.HookState
---@alias LuaX.ComponentInstance.ChangeHandler fun(element: LuaX.ElementNode | nil)
---@class LuaX.ComponentInstance : Log.BaseFunctions
---@field protected change_handler LuaX.ComponentInstance.ChangeHandler
---@field render fun(self: self, props: LuaX.Props): boolean, (LuaX.ElementNode | nil)
---@field set_on_change fun(self: self, cb: LuaX.ComponentInstance.ChangeHandler)
---@operator call:LuaX.ComponentInstance
---@class LuaX.FunctionComponentInstance : LuaX.ComponentInstance
---@field protected hookstate LuaX.HookState
---@field init fun(self: self, renderer: LuaX.FunctionComponent)
---@field rerender boolean
---@field set_on_change fun(self: self, cb: LuaX.ComponentInstance.ChangeHandler)
---@operator call: LuaX.FunctionComponentInstance
---@alias LuaX.ElementNode.LiteralNode string
---@alias LuaX.ElementNode.Child false | string | LuaX.ElementNode | nil
---@alias LuaX.ElementNode.Children LuaX.ElementNode.Child | (LuaX.ElementNode.Child)[]
---@class LuaX.ElementNode
---@field type LuaX.Component
---@field props LuaX.Props
---@field protected element_node self
---@field inherit_props fun(self: self, inherit_props: LuaX.Props): self
---@field create fun(component: LuaX.Component | LuaX.ElementNode.LiteralNode, props: LuaX.Props): self
---@field protected LITERAL_NODE LuaX.ElementNode.LiteralNode unique key
---@class LuaX.WorkLoop : Log.BaseFunctions
---@field protected list_dequue fun(self: self): function
---@field protected list LinkedList<function>
---@field protected list_enqueue fun(self: self, cb: function)
---@field protected list_is_empty fun(self: self): boolean
---@field is_running boolean
---@field start fun(self: self) Must not crash if double-started. write yourself a guard.
---@field add fun(self: self, cb: function)
---@class LuaX.WorkLoop.Gears : LuaX.WorkLoop
---@class LuaX.DefaultWorkLoop : LuaX.WorkLoop
---@class LinkedList.Node<T> : Log.BaseFunctions
---@operator call:LinkedList.Node
---@field value any
---@field next LinkedList.Node|nil
---@field prev LinkedList.Node|nil
---@alias LinkedListFilter table|any|fun(value: any): boolean
---@class LinkedList<T> : Log.BaseFunctions, { prepend: (fun(self: LinkedList<T>, value: T): LinkedList<T>), append: (fun(self: LinkedList<T>, value: T): LinkedList<T>), push: (fun(self: LinkedList<T>, value: T): LinkedList<T>), pop: (fun(self: LinkedList<T>): T), is_empty: (fun(): boolean), first: (fun(self: LinkedList<T>, filter: LinkedListFilter): T|nil), filter: (fun(self: LinkedList<T>, filter: LinkedListFilter): T[]), to_table: (fun(self: LinkedList<T>): T[]), filter_remove: (fun(self: LinkedList<T>, filter: LinkedListFilter): LinkedList<T>), enqueue: (fun(self: LinkedList<T>, value: T): LinkedList<T>), dequeue: (fun(self: LinkedList<T>): T), iterator: (fun(self: LinkedList<T>): fun(): (integer|nil, T|nil)) }
---@operator call:LinkedList
---@field protected head LinkedList.Node|nil
---@field protected tail LinkedList.Node|nil
---@class LuaX.TokenStack : Log.BaseFunctions
---@field pos integer
---@field text string
---@field tokens table<string, true>
---@field requires_literal boolean
---@operator call:LuaX.TokenStack
---@class LuaX.Language.Node.Comment
---@field type "comment"
---@class LuaX.Language.Node.Literal
---@field type "literal"
---@field value string
---@class LuaX.Language.Node.Element
---@field type "element"
---@field name string
---@field props LuaX.Props
---@field children LuaX.Language.Node[]
---@alias LuaX.Language.Node LuaX.Language.Node.Literal | LuaX.Language.Node.Element | LuaX.Language.Node.Comment
---@class LuaX.Parser.V3 : Log.BaseFunctions
---@field protected text string
---@field protected char integer
---@field protected indent string
---@field protected current_block_start integer?
---@field components { names: table<string, true>, mode: "global"|"local" } a table of component names
---@operator call:LuaX.Parser.V3
---@class LuaX.Parser.Inline
---@class LuaX.Parser.V2.Token
---@field pattern string
---@field replacer string
---@field end_pattern string
---@field end_replacer string
---@class LuaX.NativeTextElement : LuaX.NativeElement
---@field protected parent LuaX.NativeElement
---@field init fun (self: self, props: string, parent: LuaX.NativeElement)
---@field get_value fun (self: self): string
---@field set_value fun(self: self, value: string)
---@class LuaX.WiboxElement : LuaX.NativeElement
---@field texts WiboxText[]
---@class WiboxText : LuaX.NativeTextElement
---@field protected parent LuaX.WiboxElement
---@field value string
---@class LuaX.XMLElement : LuaX.NativeElement
---@field native { type: string, props: table<string, any>, children: LuaX.XMLElement[] }
---@operator call:LuaX.XMLElement
---@class LuaX.NativeElement.Virtual : LuaX.NativeElement
---@field protected type LuaX.Component
---@field protected props LuaX.Props
---@field protected new_props boolean
---@field render function()
---@alias LuaX.NativeElement.ChildrenByKey LuaX.NativeElement | LuaX.NativeElement.ChildrenByKey[] | LuaX.NativeElement.ChildrenByKey[][]
---@class LuaX.NativeElement : Log.BaseFunctions
---@field protected _children_by_key LuaX.NativeElement.ChildrenByKey
---@field get_children_by_key fun(self: self, key: LuaX.Key): LuaX.NativeElement.ChildrenByKey
---@field insert_child_by_key fun(self: self, key: LuaX.Key, child: LuaX.NativeElement)
---@field delete_children_by_key fun(self: self, key: LuaX.Key)
---@field protected count_children_by_key fun(self: self, key: LuaX.Key, ignore_virtual?: boolean): number
---@field protected set_child_by_key fun(self: self, key: LuaX.Key, child: LuaX.NativeElement | nil)
---@field protected flatten_children fun(self: self, key: LuaX.Key): { element: LuaX.NativeElement, key: LuaX.Key }[]
---@field set_prop_safe fun (self: self ,prop: string, value: any)
---@field set_prop_virtual fun (self: self, prop: string, value: any)
---@field protected _virtual_props table<string, any>
---@field set_prop fun(self: self, prop: string, value: any)
---@field insert_child fun(self: self, index: number, element: LuaX.NativeElement, is_text: boolean)
---@field delete_child fun(self: self, index: number, is_text: boolean)
---@field create_element fun(type: string): LuaX.NativeElement
---@field get_root fun(native: any): LuaX.NativeElement Convert a passed object to a root node
---@field get_type  nil | fun(self: self): string
---@field create_literal nil | fun(value: string, parent: LuaX.NativeElement): LuaX.NativeElement TODO special rules here?
---@field get_prop nil|fun(self: self, prop: string): any
---@field cleanup nil|fun(self: self)
---@field components string[]? class static property - components implemented by this class.
---@operator call : LuaX.NativeElement
---@class LuaX.Renderer : Log.BaseFunctions
---@field workloop LuaX.WorkLoop instance of a workloop
---@field native_element LuaX.NativeElement class here, not instance
---@field set_workloop fun (self: self, workloop: LuaX.WorkLoop): self set workloop using either a class or an instance
---@field protected render_function_component fun(self: self, element: LuaX.ElementNode, container: LuaX.NativeElement, key: LuaX.Key, caller?: LuaX.ElementNode)
---@field protected render_native_component fun(self: self, component: LuaX.ElementNode | nil, container: LuaX.NativeElement, key: LuaX.Key, caller?: LuaX.ElementNode)
---@operator call: LuaX.Renderer
---@alias LuaX.CLI.Mkdir fun (path: string): nil
---@alias LuaX.CLI.LsDir fun (path: string): string[]
---@class LuaX.Cmd.TranspileOptions
---@field inpath string
---@field outpath string
---@field recursive boolean|number
---@field remap { from: string, to: string }[]
---@class LuaX.Children
